import{u as T,a as V,D as I,y as E,e as R}from"./index.ByF2aI-G.js";import U from"./BadBotBlocker.CXUx5St2.js";import{C as Y}from"./Index.DoF0_xHC.js";import H from"./DatabaseTools.Cr_lwT52.js";import{C as K,S as z}from"./Caret.DMa7g0j7.js";import{C as P}from"./Card.Bqq4cvaT.js";import{C as F}from"./Tabs.BGx54iMB.js";import{C as G}from"./Index.CzfUkh0l.js";import{C as W}from"./Upload.CkgIvlRH.js";import{C as q}from"./SettingsRow.Ch1FEDlp.js";import{B as J}from"./Checkbox.BAIONgTE.js";import{G as j,a as Q}from"./Row.D0941SYu.js";import"./translations.Ur07Kmot.js";import{_ as v}from"./_plugin-vue_export-helper.BN1snXvA.js";import{_ as D,a as w}from"./default-i18n.DvLqo3S3.js";import{v as a,o as n,c as h,C as p,l as d,F as x,J as L,k as g,x as A,t as m,a as l,b as k,q as M,E as X}from"./runtime-dom.esm-bundler.DKw-RQqs.js";import Z from"./HtaccessEditor.kd8dAC7n.js";import ee from"./ImportExport.D-zwqDo9.js";import oe from"./RobotsEditor.BCSr6u_j.js";import te from"./SystemStatus.CxndKmNQ.js";import se from"./WpCode.BRnR0wc3.js";import"./helpers.yjC6K_2A.js";import"./Textarea.B0Pj3aXn.js";import"./Tooltip.B0brI66q.js";import"./index.Olu2afa7.js";import"./Slide.CdVEnD7S.js";import"./vue-router.CGjDmB5N.js";import"./license.4E_gI5OR.js";import"./upperFirst.BjBqmCj-.js";import"./_stringToArray.DnK4tKcY.js";import"./toString.Dc7QMRQR.js";import"./allowed.DPI64kEG.js";/* empty css             */import"./params.B3T1WKlC.js";import"./Header.DZmO8N8o.js";import"./addons.C_QAj7aO.js";import"./LicenseKeyBar.twKxq9OX.js";import"./ScrollTo.Bh2oF6Lr.js";import"./LogoGear.Cp4EitBg.js";import"./AnimatedNumber.BQ6DH9FO.js";import"./numbers.D-q54OtM.js";import"./Logo.C2KPC9qS.js";import"./Support.CnGyjGLX.js";import"./date.DgiqPou0.js";import"./constants.DfsCWbZk.js";import"./Url.u6scEZgi.js";import"./Exclamation.QdVEhIVR.js";import"./Gear.CdOSWQ3A.js";import"./Network.Ce9G_cdd.js";import"./ToolsSettings.CZ0f3kdZ.js";import"./Checkmark.BedAg8BV.js";import"./Blur.D3p3Plqi.js";import"./Index.BQLC1nYH.js";import"./RequiredPlans.Cd-RNSMK.js";import"./TruSeoScore.D1tEO-2v.js";import"./postSlug.Bl0Z6T8y.js";import"./metabox.SRNlGbGk.js";import"./cleanForSlug.DaL6KzBn.js";import"./_baseTrim.BYZhh0MR.js";import"./_baseSet.Bbqt6CgN.js";import"./ProBadge.BJ3spTo5.js";import"./Information.CzCa0jo7.js";import"./Ellipse.Bgc7-2f7.js";import"./Editor.Bq1LihFR.js";import"./isEqual.DPyFnjxk.js";import"./_baseIsEqual.BLPD4oRg.js";import"./_getTag.KnvRqur7.js";import"./_baseClone.B3PqkIxk.js";import"./_arrayEach.Fgt6pfHj.js";import"./Plus.CnHRD0g1.js";import"./History.bScU3eAZ.js";import"./Refresh.D8DrjpIq.js";import"./Download.DJ55Etk5.js";import"./vuedraggable.umd.CCYuUDxW.js";import"./External.DwsNMWba.js";import"./Row.B1QTQ8Tv.js";const ie="all-in-one-seo-pack",ne={emits:["update"],setup(){return{rootStore:T()}},components:{BaseCheckbox:J,GridColumn:j,GridRow:Q},props:{loading:Boolean,disabled:Boolean},data(){return{options:{},strings:{updateOptions:D("Update Options",ie)}}},mounted(){this.rootStore.aioseo.deprecatedOptions.forEach(e=>{e.enabled&&(this.options[e.value]=!0)})}},re={class:"aioseo-deprecated-options"},ae=l("br",null,null,-1),le=l("br",null,null,-1),ce=l("br",null,null,-1);function de(e,t,i,u,o,r){const c=a("base-checkbox"),b=a("grid-column"),S=a("grid-row"),f=a("base-button");return n(),h("div",re,[p(S,{class:"settings"},{default:d(()=>[(n(!0),h(x,null,L(u.rootStore.aioseo.deprecatedOptions,(_,y)=>(n(),g(b,{key:y,xl:"6",sm:"12"},{default:d(()=>[p(c,{size:"medium",modelValue:o.options[_.value],"onUpdate:modelValue":C=>o.options[_.value]=C,disabled:i.disabled},{default:d(()=>[A(m(_.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024))),128))]),_:1}),ae,p(f,{type:"blue",size:"medium",onClick:t[0]||(t[0]=_=>e.$emit("update",o.options)),loading:i.loading,disabled:i.disabled},{default:d(()=>[A(m(o.strings.updateOptions),1)]),_:1},8,["loading","disabled"]),le,ce])}const ue=v(ne,[["render",de]]),pe={setup(){return{optionsStore:V()}},computed:{infoItems(){return[{label:"Migrated Version",value:this.optionsStore.internalOptions.internal.migratedVersion},{label:"First Activated",value:this.optionsStore.internalOptions.internal.firstActivated!==0?I.fromMillis(this.optionsStore.internalOptions.internal.firstActivated*1e3).toFormat("MMMM d, yyyy"):!1}]}}},me={class:"v3-migration-info aioseo-description"},he={class:"info-items"},ge={key:0},_e={key:1};function be(e,t,i,u,o,r){return n(),h("div",me,[l("ul",he,[(n(!0),h(x,null,L(r.infoItems,(c,b)=>(n(),h("li",{key:b},[c.value?(n(),h("span",ge,m(c.label),1)):k("",!0),c.value?(n(),h("span",_e,m(c.value),1)):k("",!0)]))),128))])])}const fe=v(pe,[["render",be]]),we={setup(){return{rootStore:T(),toolsStore:E()}},components:{CoreAlert:K,CoreCard:P,CoreMainTabs:F,CoreModal:G,CoreNetworkSiteSelector:W,CoreSettingsRow:q,DeprecatedOptions:ue,MigrationInfo:fe,SvgClose:z},props:{extraActions:{type:Array,required:!1}},data(){return{site:{},tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",showAreYouSureModal:!1,doingAction:[],strings:{selectSite:"Select Site",cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"},alertLink:R.getPlainLink("Click here to open to the Scheduled Actions panel",this.rootStore.aioseo.urls.admin.scheduledActions,!0)}},computed:{areYouSureTitle(){return`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const e=w('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),t=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network cache.</strong>":"",i=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network plugin updates transient.</strong>":"";return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:`This action deletes all records of the <code>aioseo_cache</code> table in the database.${t}`,longDescription:"",showModal:!1,network:!0},{label:"Clear Plugin Updates Transient",slug:"clear-plugin-updates-transient",shortDescription:`This action clears the plugin updates transient, which forces WordPress Core to check for plugin updates.${i}`,longDescription:"",showModal:!1,network:!0},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:w("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",e),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:w("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",e),showModal:!1}]},{slug:"deprecated-options",name:"Deprecated Options",actions:[{label:"Deprecated Options",slug:"deprecated-options",shortDescription:"Enable or disable any options that have been deprecated in AIOSEO.",longDescription:"<strong>These options are not guaranteed to work and all support has been dropped.</strong>",showModal:!1,component:"deprecated-options"}]}]},activeTabObject(){return this.tabs.find(e=>e.slug===this.activeTab)}},methods:{isActionDisabled(e){return this.rootStore.aioseo.data.isNetworkAdmin?this.site.blog_id?this.site.blog_id==="network"&&e.network?!1:this.site.blog_id==="network"&&!e.network:!0:!1},isLoading(e){return!!this.doingAction[e.slug]},getSelectedActionObject(e){let t=null;return this.actions.forEach(i=>{const u=i.options.find(o=>o.value===e);u&&(t=u)}),t},maybeDoAction(e,t){if(this.currentAction=e,e.showModal){this.showAreYouSureModal=!0;return}this.doAction(t)},doAction(e){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.toolsStore.doTask({action:this.currentAction.slug,siteId:this.site.blog_id||this.rootStore.aioseo.data.currentBlogId,data:e}).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(t=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,t)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}},beforeMount(){var t;let e=-1;if(this.rootStore.aioseo.data.v3Options&&(e=this.tabs.findIndex(i=>i.slug.toLowerCase()==="migrations"),e!==-1)){const i=w('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions);this.tabs[e].actions.push({label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:w("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",i),infoComponent:"MigrationInfo",showModal:!0})}(t=this.extraActions)!=null&&t.length&&this.extraActions.forEach(i=>{if(e=this.tabs.findIndex(u=>u.slug.toLowerCase()===i.slug.toLowerCase()),e!==-1){this.tabs[e].actions=this.tabs[e].actions.concat(i.actions);return}this.tabs.push(i)})}},Ae={class:"aioseo-tools-debug"},ve={key:0,class:"aioseo-settings-row"},ke={class:"select-site"},Se=["innerHTML"],ye=["innerHTML"],Ce=["innerHTML"],De={class:"aioseo-modal-body"},Me=["innerHTML"];function Te(e,t,i,u,o,r){const c=a("core-network-site-selector"),b=a("core-alert"),S=a("core-main-tabs"),f=a("base-button"),_=a("core-settings-row"),y=a("svg-close"),C=a("core-modal"),B=a("core-card");return n(),h("div",Ae,[p(B,{slug:"debug","header-text":o.strings.cardLabel},{default:d(()=>[u.rootStore.aioseo.data.isNetworkAdmin?(n(),h("div",ve,[l("div",ke,m(o.strings.selectSite),1),p(c,{onSelectedSite:t[0]||(t[0]=s=>o.site=s),"show-network":""})])):k("",!0),p(b,{type:"yellow"},{default:d(()=>[l("div",null,m(o.strings.alertWarning),1),l("div",{innerHTML:o.alertLink},null,8,Se)]),_:1}),(n(),g(S,{internal:"",key:o.tabsKey,tabs:r.tabs,active:o.activeTab,showSaveButton:!1,onChanged:t[1]||(t[1]=s=>o.activeTab=s)},null,8,["tabs","active"])),(n(!0),h(x,null,L(r.activeTabObject.actions,(s,N)=>(n(),g(_,{key:o.activeTab+N,name:s.label,align:""},{content:d(()=>[s.component?(n(),g(M(s.component),{key:0,onUpdate:$=>r.maybeDoAction(s,$),loading:o.doingAction[s.slug],disabled:r.isActionDisabled(s)},null,40,["onUpdate","loading","disabled"])):(n(),g(f,{type:"blue",size:"medium",onClick:$=>r.maybeDoAction(s),loading:o.doingAction[s.slug],key:o.doingActionKey,disabled:r.isActionDisabled(s)},{default:d(()=>[A(m(o.strings.buttonLabel),1)]),_:2},1032,["onClick","loading","disabled"])),l("div",{class:"aioseo-description",innerHTML:s.shortDescription},null,8,ye),l("div",{class:"aioseo-description",innerHTML:s.longDescription},null,8,Ce),s.infoComponent?(n(),g(M(s.infoComponent),{key:2})):k("",!0)]),_:2},1032,["name"]))),128)),p(C,{show:o.showAreYouSureModal,"no-header":"",onClose:t[5]||(t[5]=s=>o.showAreYouSureModal=!1),classes:["aioseo-debug-modal"]},{body:d(()=>[l("div",De,[l("button",{class:"close",onClick:t[3]||(t[3]=X(s=>o.showAreYouSureModal=!1,["stop"]))},[p(y,{onClick:t[2]||(t[2]=s=>o.showAreYouSureModal=!1)})]),l("h3",null,m(r.areYouSureTitle),1),l("div",{class:"description",innerHTML:o.strings.cannotBeUndone},null,8,Me),p(f,{type:"blue",size:"medium",onClick:r.doAction},{default:d(()=>[A(m(o.strings.yesDoAction),1)]),_:1},8,["onClick"]),p(f,{type:"gray",size:"medium",onClick:t[4]||(t[4]=s=>o.showAreYouSureModal=!1)},{default:d(()=>[A(m(o.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"])])}const xe=v(we,[["render",Te]]),Le={components:{Debug:xe}};function $e(e,t,i,u,o,r){const c=a("debug",!0);return n(),g(c)}const Oe=v(Le,[["render",$e]]),O="all-in-one-seo-pack",Be={setup(){return{rootStore:T()}},components:{BadBotBlocker:U,CoreMain:Y,DatabaseTools:H,Debug:Oe,HtaccessEditor:Z,ImportExport:ee,RobotsEditor:oe,SystemStatus:te,WpCode:se},data(){return{strings:{pageName:this.rootStore.aioseo.data.isNetworkAdmin?D("Network Tools",O):D("Tools",O)}}},computed:{showSaveButton(){return this.$route.name!=="system-status"&&this.$route.name!=="import-export"&&this.$route.name!=="database-tools"&&this.$route.name!=="debug"&&this.$route.name!=="wp-code"}}};function Ne(e,t,i,u,o,r){const c=a("core-main");return n(),g(c,{"page-name":o.strings.pageName,"show-save-button":r.showSaveButton},{default:d(()=>[(n(),g(M(e.$route.name)))]),_:1},8,["page-name","show-save-button"])}const it=v(Be,[["render",Ne]]);export{it as default};
